"use strict";
var Promise = require("bluebird");
var merge = require("json-add");
var timerdaemon = require("timerdaemon");
var child_process = require("child_process");
var execSync = child_process.execSync;
var exec = child_process.exec;
function getData(opt) {
    return new Promise(function (resolve, reject) {
        exec("docker inspect $(docker ps | awk '{print$1}'|grep -v CONTAINER)", function (err, stdout, stderr) {
            if (err) {
                console.log(err);
            }
            else if (stdout) {
                if (stdout) {
                    resolve(JSON.parse(stdout));
                }
                else {
                    reject("malformed answer");
                }
            }
        });
    });
}
var Docker = (function () {
    function Docker(conf) {
        this.apiVersion = require("./package.json").version;
        this.dockerVersion = execSync("docker -v | grep version | awk '{print$3}' | sed 's/,//g'").toString("utf-8").replace('\n', '');
        this.composeVersion = execSync("docker-compose -v | grep compose | awk '{print$3}' | sed 's/,//g'").toString("utf-8").replace('\n', '');
        var configuration = {};
        if (conf) {
            merge(configuration, conf);
        }
        this.options = configuration;
    }
    Docker.prototype.data = function (options) {
        var opt;
        if (options) {
        }
        else {
        }
        return getData(opt);
    };
    Docker.prototype.stream = function (cb, options) {
        var that = this;
        if (options) {
        }
        else {
        }
        timerdaemon.pre(5000, function () {
            that.data().then(function (data) {
                cb(data);
            });
        });
    };
    return Docker;
}());
module.exports = Docker;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QTtBQUdELGlCQUFTLE1BQU0sQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFByb21pc2UgZnJvbSBcImJsdWViaXJkXCI7XG5pbXBvcnQgbWVyZ2UgPSByZXF1aXJlKFwianNvbi1hZGRcIik7XG5pbXBvcnQgdGltZXJkYWVtb24gPSByZXF1aXJlKFwidGltZXJkYWVtb25cIik7XG5cbmltcG9ydCAqIGFzIGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIlxuXG5sZXQgZXhlY1N5bmMgPSBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jO1xubGV0IGV4ZWMgPSBjaGlsZF9wcm9jZXNzLmV4ZWM7XG5cbmludGVyZmFjZSBJRG9ja2VyQ29uZiB7XG5cbn1cblxuaW50ZXJmYWNlIElkYXRhT3B0IHtcblxufVxuXG5pbnRlcmZhY2UgSXN0cmVhbU9wdCB7XG5cbn1cblxuZnVuY3Rpb24gZ2V0RGF0YShvcHQpIHtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZXhlYyhcImRvY2tlciBpbnNwZWN0ICQoZG9ja2VyIHBzIHwgYXdrICd7cHJpbnQkMX0nfGdyZXAgLXYgQ09OVEFJTkVSKVwiLCBmdW5jdGlvbihlcnIsIHN0ZG91dCwgc3RkZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG5jb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZG91dCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0ZG91dCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2Uoc3Rkb3V0KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJtYWxmb3JtZWQgYW5zd2VyXCIpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgIH0pXG5cblxuICAgIH0pXG5cbn1cblxuY2xhc3MgRG9ja2VyIHtcblxuICAgIG9wdGlvbnM6IElEb2NrZXJDb25mXG4gICAgZG9ja2VyVmVyc2lvbjogc3RyaW5nO1xuICAgIGNvbXBvc2VWZXJzaW9uOiBzdHJpbmc7XG4gICAgYXBpVmVyc2lvbjogc3RyaW5nO1xuICAgIHN0YWNrczoge307XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25mPzogSURvY2tlckNvbmYpIHtcbiAgICAgICAgdGhpcy5hcGlWZXJzaW9uID0gcmVxdWlyZShcIi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb247XG4gICAgICAgIHRoaXMuZG9ja2VyVmVyc2lvbiA9IGV4ZWNTeW5jKFwiZG9ja2VyIC12IHwgZ3JlcCB2ZXJzaW9uIHwgYXdrICd7cHJpbnQkM30nIHwgc2VkICdzLywvL2cnXCIpLnRvU3RyaW5nKFwidXRmLThcIikucmVwbGFjZSgnXFxuJywgJycpO1xuXG4gICAgICAgIHRoaXMuY29tcG9zZVZlcnNpb24gPSBleGVjU3luYyhcImRvY2tlci1jb21wb3NlIC12IHwgZ3JlcCBjb21wb3NlIHwgYXdrICd7cHJpbnQkM30nIHwgc2VkICdzLywvL2cnXCIpLnRvU3RyaW5nKFwidXRmLThcIikucmVwbGFjZSgnXFxuJywgJycpO1xuXG5cbiAgICAgICAgbGV0IGNvbmZpZ3VyYXRpb246IElEb2NrZXJDb25mID0ge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNvbmYpIHtcblxuICAgICAgICAgICAgbWVyZ2UoY29uZmlndXJhdGlvbiwgY29uZik7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZ3VyYXRpb247XG5cbiAgICB9XG5cbiAgICBkYXRhKG9wdGlvbnM/OiBJZGF0YU9wdCkge1xuXG5cbiAgICAgICAgbGV0IG9wdDtcblxuICAgICAgICBpZiAob3B0aW9ucykge1xuXG5cblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgcmV0dXJuIGdldERhdGEob3B0KTtcblxuICAgIH1cblxuICAgIHN0cmVhbShjYiwgb3B0aW9ucz86IElzdHJlYW1PcHQpIHtcblxuXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgICAgICBpZiAob3B0aW9ucykge1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWVyZGFlbW9uLnByZSg1MDAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuZGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgY2IoZGF0YSlcblxuICAgICAgICAgICAgfSlcblxuXG4gICAgICAgIH0pXG5cblxuXG5cbiAgICB9XG5cblxufVxuXG5cbmV4cG9ydCA9IERvY2tlclxuXG4iXX0=
